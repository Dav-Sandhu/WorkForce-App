import{r as a,_ as s,b as o,F as S,j as e}from"./index.df9d2a27.js";const b=a.exports.lazy(()=>s(()=>import("./react-webcam.b7d09d3f.js").then(t=>t.r),["assets/react-webcam.b7d09d3f.js","assets/index.df9d2a27.js","assets/index.c4470b89.css"])),v=a.exports.lazy(()=>s(()=>import("./Spinner.0f3d0911.js"),["assets/Spinner.0f3d0911.js","assets/index.df9d2a27.js","assets/index.c4470b89.css"])),y=({state:t,dispatch:m,navigate:d,user:u})=>{const[g,_]=a.exports.useState(!1),[p,f]=a.exports.useState(!1),r=a.exports.useRef(null),h=()=>{const n=r.current.getScreenshot();n?(m({type:"image",payload:n}),(async()=>{const c=(await s(()=>import("./useDB.4a39d696.js"),[])).makeRequest,i=await c({image:n},"/facematch",null);if(i.status===1){const l=i.token;sessionStorage.setItem("token",l),(await s(()=>import("./TokenLogin.6cdbf28b.js"),[])).default(l,c,()=>d("/"),u)}else alert("face not recognized!"),window.location.reload()})()):(alert("Failed to capture picture, try again!"),window.location.reload())};return o(S,{children:[e("hr",{className:"mt-2 mb-3"}),g?e("div",{className:"image-area",children:t.image===null?o("div",{className:"camera mb-5",onClick:h,children:[e(b,{ref:r,screenshotFormat:"image/jpeg",onUserMedia:()=>{f(!0)},height:"100%",width:"100%",videoConstraints:{facingMode:"user"}}),p?e("div",{className:"scan-text",children:"Click to Scan"}):""]}):o("div",{children:[e(v,{}),e("img",{src:t.image,className:"img-fluid user-picture mb-5"})]})}):e("div",{className:"d-grid gap-2",children:e("button",{className:"btn btn-danger",type:"button",onClick:n=>{_(!0)},children:"Or Scan your face to login!"})})]})};export{y as default};
