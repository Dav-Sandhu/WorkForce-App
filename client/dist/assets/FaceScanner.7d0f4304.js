import{r as o,_ as t,j as e,F as S,a as d}from"./index.392e2e1d.js";const k=o.exports.lazy(()=>t(()=>import("./react-webcam.d54fbdfb.js").then(n=>n.r),["assets/react-webcam.d54fbdfb.js","assets/index.392e2e1d.js","assets/index.c4470b89.css"])),T=o.exports.lazy(()=>t(()=>import("./Spinner.ec94a533.js"),["assets/Spinner.ec94a533.js","assets/index.392e2e1d.js","assets/index.c4470b89.css"])),O=({state:n,dispatch:m,navigate:_,user:g})=>{const[p,w]=o.exports.useState(!1),[h,f]=o.exports.useState(!1),c=o.exports.useRef(null),E=()=>{const s=c.current.getScreenshot();s?(m({type:"image",payload:s}),(async()=>{const v=(await t(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest,r=await v({image:s},"/facematch",null,"");if(r.status===1){const a=await t(()=>import("./Alert.0f69a7f2.js"),["assets/Alert.0f69a7f2.js","assets/index.392e2e1d.js","assets/index.c4470b89.css"]),R=a.customQuestionBox,x=await R("Is This You?",r.name,"Yes","No"),y=async(I,l,P)=>{const u=(await t(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;(await u({name:r.name,password:I},"/checkpassword",null,"")).output?(sessionStorage.setItem("token",l),(await t(()=>import("./TokenLogin.5150e2e9.js"),[])).default(l,u,()=>_("/"),P)):window.location.reload()};x?await a.customInputAlert("Enter Your Password",y,{token:r.token,user:g}):window.location.reload()}else t(()=>import("./Alert.0f69a7f2.js"),["assets/Alert.0f69a7f2.js","assets/index.392e2e1d.js","assets/index.c4470b89.css"]).then(async a=>{await a.customAlert("Face Was Not Recognized!","Please try again with better lighting with a more clear view of your face.","error"),window.location.reload()}).catch(a=>{console.log(a),window.location.reload()})})()):t(()=>import("./Alert.0f69a7f2.js"),["assets/Alert.0f69a7f2.js","assets/index.392e2e1d.js","assets/index.c4470b89.css"]).then(async i=>{await i.customAlert("Failed To Capture Picture!","Please try again.","error"),window.location.reload()}).catch(i=>{console.log(i),window.location.reload()})};return e(S,{children:p?e("div",{className:"image-area",children:n.image===null?d("div",{className:"camera mb-5",onClick:E,children:[e(k,{ref:c,screenshotFormat:"image/jpeg",onUserMedia:()=>{f(!0)},height:"100%",width:"100%",screenshotSize:{width:500,height:500},videoConstraints:{facingMode:"user"}}),h?e("div",{className:"scan-text",children:"Click to Scan"}):""]}):d("div",{children:[e(T,{}),e("img",{src:n.image,className:"img-fluid user-picture mb-5"})]})}):e("div",{className:"d-grid gap-2 mb-5",children:e("button",{className:"btn btn-danger",type:"button",onClick:s=>{w(!0)},children:"Scan your face to login!"})})})};export{O as default};
