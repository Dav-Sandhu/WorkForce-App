import{r as u,_ as o,u as f,j as e,F as d,b as c}from"./index.5a40ab21.js";const E=u.exports.lazy(()=>o(()=>import("./UserButton.a5bd8c55.js"),["assets/UserButton.a5bd8c55.js","assets/index.5a40ab21.js","assets/index.c4470b89.css","assets/UserButton.d52919d1.css"])),v=u.exports.lazy(()=>o(()=>import("./Spinner.0dc1f0f7.js"),["assets/Spinner.0dc1f0f7.js","assets/index.5a40ab21.js","assets/index.c4470b89.css"])),T=()=>{const[b,g]=u.exports.useState(!0),[m,h]=u.exports.useState([]),n=f().userInfo.employee_number,r=sessionStorage.getItem("token"),l=async()=>{const a=(await o(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest,s=await a({employee_number:n},"/getunfinishedprocesses",r,"get"),_=await a({employee_number:n},"/getbreaks",r,"get"),i=[...s.output,..._.output];i.sort((w,k)=>new Date(w.start)-new Date(k.start)),g(!1),h(i)},y=async t=>{const s=(await o(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;(t.break_type?await s({employee_number:n,start:t.start},"/endbreak",r,"post"):await s({employee_number:n,process_type:t.process_type,business_name:t.business_name,contact_email:t.contact_email,start:t.start},"/finishjob",r,"post")).status===1?l():o(()=>import("./Alert.641abcb6.js"),["assets/Alert.641abcb6.js","assets/index.5a40ab21.js","assets/index.c4470b89.css"]).then(async i=>{await i.customAlert("Something Went Wrong!","Please try again later.","error")})},p=async t=>{const s=(await o(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;(t.break_type?await s({employee_number:n,break_type:t.break_type,start:t.start},"/deletebreak",r,"post"):await s({employee_number:n,process_type:t.process_type,business_name:t.business_name,contact_email:t.contact_email,start:t.start},"/deletejob",r,"post")).status===1?l():o(()=>import("./Alert.641abcb6.js"),["assets/Alert.641abcb6.js","assets/index.5a40ab21.js","assets/index.c4470b89.css"]).then(async i=>{await i.customAlert("Something Went Wrong!","Please try again later.","error")})};return u.exports.useEffect(()=>{l()},[]),e(d,{children:b?e(v,{}):c(d,{children:[e(E,{})," ",e("br",{}),c("div",{className:"working-container",children:[e("h1",{className:"jobs-title fw-bold fs-25 mb-4 text-center text-dark title",children:"Currently Working On"}),m.length===0?e("h5",{className:"text-center text-muted",children:"You are not working on anything..."}):m.map(t=>{const a=new Date(t.start),s=t.break_type?t.break_type:t.business_name+": "+t.process_type;return c("div",{className:"ongoing-task mb-4",children:[c("div",{className:"work-information",children:[e("button",{type:"button",className:"close-button-left btn-close",onClick:()=>{p(t)}}),c("div",{className:"work-description",children:[e("h3",{children:s}),e("p",{children:a.toLocaleString()})]}),e("button",{type:"button",className:"close-button-right btn btn-light",onClick:()=>{p(t)},children:"Remove"})]}),e("button",{className:"finish-button btn btn-danger",onClick:()=>{y(t)},children:"Finished"})]},t.start)})]})]})})};export{T as default};
