import{r as a,_ as t,b as i,F as x,j as e}from"./index.023e380d.js";const b=a.exports.lazy(()=>t(()=>import("./react-webcam.c36e5f28.js").then(o=>o.r),["assets/react-webcam.c36e5f28.js","assets/index.023e380d.js","assets/index.c4470b89.css"])),y=a.exports.lazy(()=>t(()=>import("./Spinner.e03065ab.js"),["assets/Spinner.e03065ab.js","assets/index.023e380d.js","assets/index.c4470b89.css"])),T=({state:o,dispatch:u,navigate:_,user:g})=>{const[p,h]=a.exports.useState(!1),[w,f]=a.exports.useState(!1),l=a.exports.useRef(null),v=()=>{const s=l.current.getScreenshot();s?(u({type:"image",payload:s}),(async()=>{const m=(await t(()=>import("./useDB.4a39d696.js"),[])).makeRequest,c=await m({image:s},"/facematch",null);if(c.status===1){const E=(await t(()=>import("./Alert.a33ee27f.js"),["assets/Alert.a33ee27f.js","assets/index.023e380d.js","assets/index.c4470b89.css"])).customQuestionBox;if(await E("Is This You?",c.name,"Yes","No")){const d=c.token;sessionStorage.setItem("token",d),(await t(()=>import("./TokenLogin.6220583a.js"),[])).default(d,m,()=>_("/"),g)}else window.location.reload()}else t(()=>import("./Alert.a33ee27f.js"),["assets/Alert.a33ee27f.js","assets/index.023e380d.js","assets/index.c4470b89.css"]).then(async r=>{await r.customAlert("Face Was Not Recognized!","Please try again with better lighting with a more clear view of your face.","error"),window.location.reload()}).catch(r=>{console.log(r),window.location.reload()})})()):t(()=>import("./Alert.a33ee27f.js"),["assets/Alert.a33ee27f.js","assets/index.023e380d.js","assets/index.c4470b89.css"]).then(async n=>{await n.customAlert("Failed To Capture Picture!","Please try again.","error")}).catch(n=>{console.log(n),window.location.reload()})};return i(x,{children:[e("hr",{className:"mt-2 mb-3"}),p?e("div",{className:"image-area",children:o.image===null?i("div",{className:"camera mb-5",onClick:v,children:[e(b,{ref:l,screenshotFormat:"image/jpeg",onUserMedia:()=>{f(!0)},height:"100%",width:"100%",videoConstraints:{facingMode:"user"}}),w?e("div",{className:"scan-text",children:"Click to Scan"}):""]}):i("div",{children:[e(y,{}),e("img",{src:o.image,className:"img-fluid user-picture mb-5"})]})}):e("div",{className:"d-grid gap-2",children:e("button",{className:"btn btn-danger",type:"button",onClick:s=>{h(!0)},children:"Or Scan your face to login!"})})]})};export{T as default};
