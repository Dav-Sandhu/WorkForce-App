import{r,_ as n,u as y,j as e,F as p,a as i}from"./index.987644aa.js";const E=r.exports.lazy(()=>n(()=>import("./UserButton.ef6e2130.js"),["assets/UserButton.ef6e2130.js","assets/index.987644aa.js","assets/index.c4470b89.css","assets/UserButton.d52919d1.css"])),x=r.exports.lazy(()=>n(()=>import("./Spinner.05ffce20.js"),["assets/Spinner.05ffce20.js","assets/index.987644aa.js","assets/index.c4470b89.css"])),I=()=>{const[g,h]=r.exports.useState(!0),[c,b]=r.exports.useState([]),a=sessionStorage.getItem("token"),u=y(),l=async()=>{const o=(await n(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest,s=await o(null,"/getunfinishedprocesses",a,"get"),_=await o(null,"/getbreaks",a,"get");(await n(()=>import("./Alert.3d855388.js"),["assets/Alert.3d855388.js","assets/index.987644aa.js","assets/index.c4470b89.css"])).createBreakTimer(u.userInfo.break_time,u.userInfo.lunch_time);const m=[...s.output,..._.output];m.sort((w,f)=>new Date(w.start)-new Date(f.start)),h(!1),b(m)},k=async t=>{const s=(await n(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;(t.break_type?await s({start:t.start},"/endbreak",a,"post"):await s({process_type:t.process_type,business_name:t.business_name,contact_email:t.contact_email,start:t.start},"/finishjob",a,"post")).status===1?l():n(()=>import("./Alert.3d855388.js"),["assets/Alert.3d855388.js","assets/index.987644aa.js","assets/index.c4470b89.css"]).then(async d=>{await d.customAlert("Something Went Wrong!","Please try again later.","error")})};return r.exports.useEffect(()=>{l()},[]),e(p,{children:g?e(x,{}):i(p,{children:[e(E,{})," ",e("br",{}),i("div",{className:"working-container",children:[e("h1",{className:"jobs-title fw-bold fs-25 mb-4 text-center text-dark title",children:"Currently Working On"}),c.length===0?e("h5",{className:"text-center text-muted",children:"You are not working on anything..."}):c.map(t=>{const o=new Date(t.start),s=t.break_type?t.break_type:t.business_name+": "+t.process_type;return i("div",{className:"ongoing-task mb-4",children:[e("div",{className:"work-information",children:i("div",{className:"work-description",children:[e("h3",{children:s}),e("p",{children:o.toLocaleString()})]})}),e("button",{className:"finish-button btn btn-danger",onClick:()=>{k(t)},children:"Finished"})]},t.start)})]})]})})};export{I as default};
