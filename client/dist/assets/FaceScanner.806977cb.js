import{r as a,_ as t,b as c,F as x,j as e}from"./index.5984ac47.js";const S=a.exports.lazy(()=>t(()=>import("./react-webcam.0c89b92e.js").then(o=>o.r),["assets/react-webcam.0c89b92e.js","assets/index.5984ac47.js","assets/index.c4470b89.css"])),b=a.exports.lazy(()=>t(()=>import("./Spinner.10d31bb8.js"),["assets/Spinner.10d31bb8.js","assets/index.5984ac47.js","assets/index.c4470b89.css"])),T=({state:o,dispatch:u,navigate:_,user:g})=>{const[h,p]=a.exports.useState(!1),[w,f]=a.exports.useState(!1),l=a.exports.useRef(null),v=()=>{const n=l.current.getScreenshot();n?(u({type:"image",payload:n}),(async()=>{const m=(await t(()=>import("./useDB.4a39d696.js"),[])).makeRequest,i=await m({image:n},"/facematch",null);if(i.status===1){const E=(await t(()=>import("./Alert.9aa06ec9.js"),["assets/Alert.9aa06ec9.js","assets/index.5984ac47.js","assets/index.c4470b89.css"])).customQuestionBox;if(await E("Is This You?",i.name,"Yes","No")){const d=i.token;sessionStorage.setItem("token",d),(await t(()=>import("./TokenLogin.6220583a.js"),[])).default(d,m,()=>_("/"),g)}else window.location.reload()}else t(()=>import("./Alert.9aa06ec9.js"),["assets/Alert.9aa06ec9.js","assets/index.5984ac47.js","assets/index.c4470b89.css"]).then(async r=>{await r.customAlert("Face Was Not Recognized!","Please try again with better lighting with a more clear view of your face.","error"),window.location.reload()}).catch(r=>{console.log(r),window.location.reload()})})()):t(()=>import("./Alert.9aa06ec9.js"),["assets/Alert.9aa06ec9.js","assets/index.5984ac47.js","assets/index.c4470b89.css"]).then(async s=>{await s.customAlert("Failed To Capture Picture!","Please try again.","error"),window.location.reload()}).catch(s=>{console.log(s),window.location.reload()})};return c(x,{children:[e("hr",{className:"mt-2 mb-3"}),h?e("div",{className:"image-area",children:o.image===null?c("div",{className:"camera mb-5",onClick:v,children:[e(S,{ref:l,screenshotFormat:"image/jpeg",onUserMedia:()=>{f(!0)},height:"100%",width:"100%",screenshotSize:{width:500,height:500},videoConstraints:{facingMode:"user"}}),w?e("div",{className:"scan-text",children:"Click to Scan"}):""]}):c("div",{children:[e(b,{}),e("img",{src:o.image,className:"img-fluid user-picture mb-5"})]})}):e("div",{className:"d-grid gap-2",children:e("button",{className:"btn btn-danger",type:"button",onClick:n=>{p(!0)},children:"Or Scan your face to login!"})})]})};export{T as default};
