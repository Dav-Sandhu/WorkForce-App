import{r as c,_ as o,u as k,j as e,F as p,a as i}from"./index.ff36024a.js";const f=c.exports.lazy(()=>o(()=>import("./UserButton.938d0f3f.js"),["assets/UserButton.938d0f3f.js","assets/index.ff36024a.js","assets/index.c4470b89.css","assets/UserButton.d52919d1.css"])),E=c.exports.lazy(()=>o(()=>import("./Spinner.98024c8e.js"),["assets/Spinner.98024c8e.js","assets/index.ff36024a.js","assets/index.c4470b89.css"])),x=()=>{const[d,b]=c.exports.useState(!0),[_,g]=c.exports.useState([]);k().userInfo.employee_number;const n=sessionStorage.getItem("token"),u=async()=>{const r=(await o(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest,s=await r(null,"/getunfinishedprocesses",n,"get"),l=await r(null,"/getbreaks",n,"get"),a=[...s.output,...l.output];a.sort((y,w)=>new Date(y.start)-new Date(w.start)),b(!1),g(a)},h=async t=>{const s=(await o(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;(t.break_type?await s({start:t.start},"/endbreak",n,"post"):await s({process_type:t.process_type,business_name:t.business_name,contact_email:t.contact_email,start:t.start},"/finishjob",n,"post")).status===1?u():o(()=>import("./Alert.21c38849.js"),["assets/Alert.21c38849.js","assets/index.ff36024a.js","assets/index.c4470b89.css"]).then(async a=>{await a.customAlert("Something Went Wrong!","Please try again later.","error")})},m=async t=>{const s=(await o(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;(t.break_type?await s({break_type:t.break_type,start:t.start},"/deletebreak",n,"post"):await s({process_type:t.process_type,business_name:t.business_name,contact_email:t.contact_email,start:t.start},"/deletejob",n,"post")).status===1?u():o(()=>import("./Alert.21c38849.js"),["assets/Alert.21c38849.js","assets/index.ff36024a.js","assets/index.c4470b89.css"]).then(async a=>{await a.customAlert("Something Went Wrong!","Please try again later.","error")})};return c.exports.useEffect(()=>{u()},[]),e(p,{children:d?e(E,{}):i(p,{children:[e(f,{})," ",e("br",{}),i("div",{className:"working-container",children:[e("h1",{className:"jobs-title fw-bold fs-25 mb-4 text-center text-dark title",children:"Currently Working On"}),_.length===0?e("h5",{className:"text-center text-muted",children:"You are not working on anything..."}):_.map(t=>{const r=new Date(t.start),s=t.break_type?t.break_type:t.business_name+": "+t.process_type;return i("div",{className:"ongoing-task mb-4",children:[i("div",{className:"work-information",children:[e("button",{type:"button",className:"close-button-left btn-close",onClick:()=>{m(t)}}),i("div",{className:"work-description",children:[e("h3",{children:s}),e("p",{children:r.toLocaleString()})]}),e("button",{type:"button",className:"close-button-right btn btn-light",onClick:()=>{m(t)},children:"Remove"})]}),e("button",{className:"finish-button btn btn-danger",onClick:()=>{h(t)},children:"Finished"})]},t.start)})]})]})})};export{x as default};
