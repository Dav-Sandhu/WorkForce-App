import{r as i,_ as h,u as y,a as _,b as n,j as a}from"./index.fec864ca.js";const f=(r,{type:m,payload:s})=>{switch(m){case"employee_number":return{...r,employee_number:s};case"password":return{...r,password:s};case"image":return{...r,image:s};case"alert":return{...r,alert:!r.alert};case"valid":return{...r,valid:Boolean(s)};case"empty_employee_number":return{...r,empty_employee_number:Boolean(s)};case"empty_password":return{...r,empty_password:Boolean(s)};case"checked":return{...r,checked:Boolean(s)};default:return r}},b=i.exports.lazy(()=>h(()=>import("./FaceScanner.19386cef.js"),["assets/FaceScanner.19386cef.js","assets/index.fec864ca.js","assets/index.aed92d30.css","assets/FaceScanner.e9a6ad0c.css"])),N=()=>{const r=i.exports.useRef(null),m=i.exports.useRef(null),s=y(),[e,o]=i.exports.useReducer(f,{employee_number:"",password:localStorage.getItem("password")||"",image:null,alert:!1,valid:!0,empty_employee_number:!0,empty_password:!0}),d=l=>{o({type:l.target.id,payload:l.target.value})};i.exports.useEffect(()=>{m.current.className.includes("is-invalid")||r.current.className.includes("is-invalid")?o({type:"valid",payload:!1}):o({type:"valid",payload:!0})},[e.employee_number,e.password]);const p=_();return n("div",{className:"login container",children:[a("h1",{className:"fw-bold fs-25 mb-1 text-center text-info title",children:"WorkForce Login"}),e.alert?n("div",{className:"alert alert-danger alert-dismissible",role:"alert",children:["Warning: Missing Fields",a("button",{className:"btn-close","aria-label":"close",onClick:()=>{o({type:"alert"})}})]}):"",n("form",{className:e.valid?"":"was-validated",noValidate:!0,onSubmit:l=>{l.preventDefault(),(async()=>{const u=(await h(()=>import("./useDB.50c6ad0b.js"),[])).makeRequest;try{const c=await u({type:"find-employee",values:[e.employee_number,e.password]},"/authenticate",null);sessionStorage.setItem("token",c.token);const t=await u(null,"/userInfo",c);t.length>0?(s.setUserInfo({employee_number:t[0].employee_number,first_name:t[0].first_name,last_name:t[0].last_name,email:t[0].email,password:t[0].password,hourly_wage:t[0].hourly_wage,picture:t[0].picture}),e.checked&&localStorage.setItem("password",e.password),p("/")):alert("Something went wrong...")}catch{e.valid?alert("Login attempt failed, please make sure your information is correct!"):o({type:"alert"})}})()},children:[a("div",{className:"input-group mb-4",children:n("div",{className:"form-floating",children:[a("input",{id:"employee_number",className:e.empty_employee_number?"form-control":e.employee_number.length>0?"form-control is-valid":"form-control is-invalid",type:"text",ref:m,placeholder:"Employee Number",value:e.employee_number,onChange:l=>{d(l),o({type:"empty_employee_number",payload:!1})},required:!0}),a("label",{htmlFor:"employee_number",children:"Employee Number: "}),a("div",{className:"invalid-feedback user-invalid",children:"Invalid input"})]})}),n("div",{className:"form-floating mb-4",children:[a("input",{id:"password",className:e.empty_password?"form-control":e.password.length>0?"form-control is-valid":"form-control is-invalid",type:"password",ref:r,placeholder:"Password",value:e.password,onChange:l=>{d(l),o({type:"empty_password",payload:!1})},required:!0}),a("label",{htmlFor:"password",children:"Password: "}),a("div",{className:"invalid-feedback",children:"Invalid input"})]}),a("div",{className:"mb-4",children:n("div",{className:"form-check",children:[a("input",{className:"form-check-input",type:"checkbox",value:"",id:"savePassword",onChange:l=>{o({type:"checked",payload:l.target.checked})}}),a("label",{className:"form-check-label",htmlFor:"savePassword",children:"Remember Password"})]})}),a("input",{className:"btn btn-outline-primary",type:"submit",value:"Login"})]}),a("a",{className:"mb-4",href:"#!",children:"Forgot password?"}),n("p",{children:["Not a member? ",a("a",{href:"/register",children:"Register"})]}),a(b,{state:e,dispatch:o,navigate:p,user:s})]})};export{N as default};
