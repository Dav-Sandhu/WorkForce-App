import{u as p,r as m,j as e,F as f,_ as u,b as y,a as l}from"./index.2a58c38f.js";function g(n){const t=new Date(n);let o=new Date-t;o=Math.max(0,o);const s=Math.floor(o/(1e3*60*60)).toString().padStart(2,"0"),a=Math.floor(o%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),i=Math.floor(o%(1e3*60)/1e3).toString().padStart(2,"0");return`${s}:${a}:${i}`}function S(){const n=p(),t=n.userInfo.clock_in,o=n.userInfo.clock_out,[s,a]=m.exports.useState(t===null?new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):o===null?"Hours Worked: "+g(t):"");return m.exports.useEffect(()=>{const i=setInterval(()=>{a(t!==null&&o===null?"Hours Worked: "+g(t):new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>clearInterval(i)},[]),e(f,{children:s})}const N=m.exports.lazy(()=>u(()=>import("./WebCamModal.0b8bc207.js"),["assets/WebCamModal.0b8bc207.js","assets/index.2a58c38f.js","assets/index.c4470b89.css","assets/react-webcam.7ad324c0.js","assets/WebCamModal.28bc8eda.css"])),x=()=>{const n=y(),t=p(),[o,s]=m.exports.useState(!1),a=m.exports.useRef(null),i=t.userInfo.picture,h=t.userInfo.first_name+" "+t.userInfo.last_name,I=t.userInfo.email,d=t.userInfo.clock_in,v=t.userInfo.clock_out,w=t.userInfo.is_supervisor,k=async r=>{const c=(await u(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;await c({employee_number:t.userInfo.employee_number,break_type:r},"/startbreak",sessionStorage.getItem("token"),"post"),n("/working")};return l("div",{className:"tasks-page",children:[d!==null&&v===null?l("div",{className:"top-section",children:[e(S,{}),w?e("button",{type:"button",style:{backgroundColor:"#343a40",color:"#FFFFFF"},onClick:()=>n("/admin"),children:"Admin"}):""]}):"",o?e(N,{ref:a,setWebcamActive:s}):"",d===null?l("div",{className:"not_clocked_in",children:[e("div",{className:"mt-3 mb-4",children:e("img",{src:i,className:"img-fluid profile-picture",loading:"lazy",style:{width:"100px"},onError:r=>{r.target.onerror=null,r.target.src="/default profile picture.jpg"},onClick:()=>{s(!0)}})}),l("div",{children:[e("h4",{className:"mb-2",children:h}),e("p",{className:"text-muted mb-4",children:I})]}),e("button",{type:"button",className:"btn btn-primary btn-rounded btn-lg",onClick:()=>{(async()=>{const c=(await u(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest,_=await c(null,"/clockin",sessionStorage.getItem("token"),"post");sessionStorage.removeItem("token"),sessionStorage.setItem("token",_.token),await(await u(()=>import("./TokenLogin.2eb55c78.js"),[])).default(_.token,c,()=>{},t)})()},children:"Clock In"})]}):l(f,{children:[e("h1",{className:"tasks-title fw-bold fs-25 mb-4 text-center text-dark title",children:"What do you want to do?"})," ",e("br",{}),l("div",{className:"tasks",children:[e("button",{type:"button",className:"btn btn-lg btn-primary",onClick:()=>n("/jobs"),children:"Start a Task"}),e("button",{type:"button",className:"btn btn-lg btn-info",onClick:()=>n("/working"),children:"Current Task"}),e("button",{type:"button",className:"btn btn-lg btn-success",onClick:()=>{k("break")},children:"Take a Break"}),e("button",{type:"button",className:"btn btn-lg btn-warning",onClick:()=>{k("lunch")},children:"Go To Lunch"}),e("button",{className:"btn btn-danger btn-lg",onClick:()=>{(async()=>{const c=(await u(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;await c(null,"/clockout",sessionStorage.getItem("token"),"post"),sessionStorage.removeItem("token"),window.location.reload()})()},children:"Clock Out"})]})]})]})};export{x as default};
