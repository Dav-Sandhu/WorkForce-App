import{r as d,u as f,b as k,j as s,_ as a}from"./index.6862199d.js";import{W as v}from"./react-webcam.9b2799bc.js";const x=({setWebcamActive:l},n)=>{const t=f(),[r,g]=d.exports.useState(!1);return k("div",{className:"webcam-modal",children:[r&&s("button",{className:"btn btn-danger btn-rounded close-webcam-button",onClick:()=>l(!1),children:"x"}),s(v,{audio:!1,ref:n,height:"100%",width:"100%",screenshotFormat:"image/jpeg",screenshotSize:{width:500,height:500},onUserMedia:()=>g(!0)}),r&&s("button",{className:"take-picture btn btn-success btn-rounded btn-lg",onClick:()=>{const c=t.userInfo.employee_number,_=t.userInfo.first_name+"-"+t.userInfo.last_name+"-"+c+".jpg",b=n.current.getScreenshot(),o=new Image;o.src=b,o.onload=async()=>{const e=document.createElement("canvas"),p=e.getContext("2d");e.width=500,e.height=500,p.drawImage(o,0,0,500,500);const w=e.toDataURL(),h=(await a(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest,i=await h({name:_,image:w,employee_number:c,token:sessionStorage.getItem("token")},"/upload-image",sessionStorage.getItem("token"),"post");if(i.status===1){const m=i.token;sessionStorage.removeItem("token"),sessionStorage.setItem("token",m);const I=(await a(()=>import("./Alert.9beb0a47.js"),["assets/Alert.9beb0a47.js","assets/index.6862199d.js","assets/index.c4470b89.css"])).customAlert;await I("Success!","Picture updated.","success")}else{const u=(await a(()=>import("./Alert.9beb0a47.js"),["assets/Alert.9beb0a47.js","assets/index.6862199d.js","assets/index.c4470b89.css"])).customAlert;await u("Picture Failed To Upload!","Please try again later.","error")}window.location.reload()}},children:"Take Picture"})]})},A=d.exports.forwardRef(x);export{A as default};
