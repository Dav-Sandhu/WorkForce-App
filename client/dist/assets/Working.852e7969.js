import{r as u,_ as r,u as h,b as a,F as y,j as s}from"./index.973c9de1.js";const w=u.exports.lazy(()=>r(()=>import("./UserButton.bf476fc5.js"),["assets/UserButton.bf476fc5.js","assets/index.973c9de1.js","assets/index.c4470b89.css","assets/UserButton.d52919d1.css"])),v=()=>{const[l,p]=u.exports.useState([]),n=h().userInfo.employee_number,i=async()=>{const o=(await r(()=>import("./useDB.4a39d696.js"),[])).makeRequest,t=await o({employee_number:n},"/getunfinishedprocesses",sessionStorage.getItem("token")),c=await o({employee_number:n},"/getbreaks",sessionStorage.getItem("token")),_=[...t.output,...c.output];_.sort((d,g)=>new Date(d.start)-new Date(g.start)),p(_)},b=async e=>{const t=(await r(()=>import("./useDB.4a39d696.js"),[])).makeRequest;(e.break_type?await t({employee_number:n,start:e.start},"/endbreak",null):await t({employee_number:n,process_type:e.process_type,business_name:e.business_name,contact_email:e.contact_email,start:e.start},"/finishjob",null)).status===1?i():alert("Something went wrong: please try again later")},m=async e=>{const t=(await r(()=>import("./useDB.4a39d696.js"),[])).makeRequest;(e.break_type?await t({employee_number:n,break_type:e.break_type,start:e.start},"/deletebreak",null):await t({employee_number:n,process_type:e.process_type,business_name:e.business_name,contact_email:e.contact_email,start:e.start},"/deletejob",null)).status===1?i():alert("Something went wrong: please try again later")};return u.exports.useEffect(()=>{i()},[]),a(y,{children:[s(w,{})," ",s("br",{}),a("div",{className:"working-container",children:[s("h1",{className:"jobs-title fw-bold fs-25 mb-4 text-center text-dark title",children:"Currently Working On"}),l.length===0?s("h5",{className:"text-center text-muted",children:"You are not working on anything..."}):l.map(e=>{const o=new Date(e.start),t=e.break_type?e.break_type:e.business_name+": "+e.process_type;return a("div",{className:"ongoing-task mb-4",children:[a("div",{className:"work-information",children:[s("button",{type:"button",className:"close-button-left btn-close",onClick:()=>{m(e)}}),a("div",{className:"work-description",children:[s("h3",{children:t}),s("p",{children:o.toLocaleString()})]}),s("button",{type:"button",className:"close-button-right btn btn-light",onClick:()=>{m(e)},children:"Remove"})]}),s("button",{className:"finish-button btn btn-danger",onClick:()=>{b(e)},children:"Finished"})]},e.start)})]})]})};export{v as default};
