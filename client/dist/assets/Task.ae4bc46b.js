import{u as f,r as m,j as t,F as d,_ as u,b as y,a as s}from"./index.ff36024a.js";function g(n){const e=new Date(n);let o=new Date-e;o=Math.max(0,o);const r=Math.floor(o/(1e3*60*60)).toString().padStart(2,"0"),a=Math.floor(o%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),i=Math.floor(o%(1e3*60)/1e3).toString().padStart(2,"0");return`${r}:${a}:${i}`}function S(){const n=f(),e=n.userInfo.clock_in,o=n.userInfo.clock_out,[r,a]=m.exports.useState(e===null?new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):o===null?"Hours Worked: "+g(e):"");return m.exports.useEffect(()=>{const i=setInterval(()=>{a(e!==null&&o===null?"Hours Worked: "+g(e):new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>clearInterval(i)},[]),t(d,{children:r})}const C=m.exports.lazy(()=>u(()=>import("./WebCamModal.7d30ea3b.js"),["assets/WebCamModal.7d30ea3b.js","assets/index.ff36024a.js","assets/index.c4470b89.css","assets/react-webcam.6267d9b4.js","assets/WebCamModal.28bc8eda.css"])),F=()=>{const n=y(),e=f(),[o,r]=m.exports.useState(!1),a=m.exports.useRef(null),i=e.userInfo.picture,h=e.userInfo.first_name+" "+e.userInfo.last_name,I=e.userInfo.email,k=e.userInfo.clock_in,v=e.userInfo.clock_out,w=e.userInfo.is_supervisor,b=async c=>{const l=(await u(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;await l({employee_number:e.userInfo.employee_number,break_type:c},"/startbreak",sessionStorage.getItem("token"),"post"),n("/working")};return s("div",{className:"tasks-page",children:[k!==null&&v===null?s("div",{className:"top-section",children:[t(S,{}),w?t("button",{type:"button",style:{backgroundColor:"#343a40",color:"#FFFFFF"},onClick:()=>n("/admin"),children:"Admin"}):""]}):"",o?t(C,{ref:a,setWebcamActive:r}):"",k===null?s(d,{children:[t("button",{type:"button",style:{backgroundColor:"#3f47cc",color:"#FFFFFF"},onClick:()=>{r(!0)},children:"Update Profile Picture"}),s("div",{className:"not_clocked_in",children:[t("div",{className:"mt-3 mb-4",children:t("img",{src:i,className:"img-fluid profile-picture",loading:"lazy",style:{width:"100px"},onError:c=>{c.target.onerror=null,c.target.src="/default profile picture.jpg"}})}),s("div",{children:[t("h4",{className:"mb-2",children:h}),t("p",{className:"text-muted mb-4",children:I})]}),t("button",{type:"button",className:"btn btn-primary btn-rounded btn-lg m-2",onClick:()=>{(async()=>{const l=(await u(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest,p=await l(null,"/clockin",sessionStorage.getItem("token"),"post");sessionStorage.removeItem("token"),sessionStorage.setItem("token",p.token),await(await u(()=>import("./TokenLogin.2eb55c78.js"),[])).default(p.token,l,()=>{},e)})()},children:"Clock In"})]})]}):s(d,{children:[t("h1",{className:"tasks-title fw-bold fs-25 mb-4 text-center text-dark title",children:"What do you want to do?"})," ",t("br",{}),s("div",{className:"tasks",children:[t("button",{type:"button",className:"btn btn-lg btn-primary",onClick:()=>n("/jobs"),children:"Start a Task"}),t("button",{type:"button",className:"btn btn-lg btn-info",onClick:()=>n("/working"),children:"Current Task"}),t("button",{type:"button",className:"btn btn-lg btn-success",onClick:()=>{b("break")},children:"Take a Break"}),t("button",{type:"button",className:"btn btn-lg btn-warning",onClick:()=>{b("lunch")},children:"Go To Lunch"}),t("button",{className:"btn btn-danger btn-lg",onClick:()=>{(async()=>{const l=(await u(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;await l(null,"/clockout",sessionStorage.getItem("token"),"post"),sessionStorage.removeItem("token"),window.location.reload()})()},children:"Clock Out"})]})]})]})};export{F as default};
