import{a as b,u as f,r as n,j as t,F as h,b as g,_ as p}from"./index.fb6a51fc.js";import{U as y}from"./UserButton.bfbf8ea6.js";const k=({selectedJob:u})=>{const c=b(),i=f(),[l,m]=n.exports.useState([]);return n.exports.useEffect(()=>{(async()=>{const r=sessionStorage.getItem("token");if(r!==null){const o=(await p(()=>import("./useDB.4a39d696.js"),[])).makeRequest,a=await o(null,"/getcustomers",r);a.status===1?m(a.output):c("/")}else c("/login")})()},[]),t(h,{children:l.map(e=>g("div",{className:"customer",onClick:()=>{(async()=>{const o=(await p(()=>import("./useDB.4a39d696.js"),[])).makeRequest,a=await o({employee_number:i.userInfo.employee_number,process_type:u,business_name:e.business_name,contact_email:e.contact_email},"/startjob",null);if(a.status===1){const d=new Date(a.output[0].start);console.log(d)}else alert("You already did this job today!")})()},children:[t("img",{className:"img-fluid company-logo",src:e.logo,alt:"Company Logo"}),t("h4",{className:"h5 text-nowrap",children:e.business_name})]},e.business_name+e.contact_email))})},x=()=>{const u=b(),[c,i]=n.exports.useState([]),[l,m]=n.exports.useState(!0),[e,r]=n.exports.useState("");return n.exports.useEffect(()=>{(async()=>{const o=sessionStorage.getItem("token");if(o!==null){const d=(await p(()=>import("./useDB.4a39d696.js"),[])).makeRequest,_=await d(null,"/getjobs",o);_.status===1?i(_.output):u("/")}else u("/login")})()},[]),g("div",{className:"jobs-page",children:[t(y,{})," ",t("br",{}),t("h1",{className:"jobs-title fw-bold fs-25 mb-4 text-center text-dark title",children:l?"What job are you working on?":"What customer are you doing the job for?"}),t("div",{className:"jobs",children:l?c.map(s=>t("button",{className:"btn btn-lg btn-secondary",onClick:()=>{r(s.process_type),m(!1)},children:s.process_type},s.process_type)):t(k,{selectedJob:e})})]})};export{x as default};
