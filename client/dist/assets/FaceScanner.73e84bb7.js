import{r as o,_ as t,a as c,F as S,j as e}from"./index.f1a39131.js";const k=o.exports.lazy(()=>t(()=>import("./react-webcam.20d10c51.js").then(s=>s.r),["assets/react-webcam.20d10c51.js","assets/index.f1a39131.js","assets/index.c4470b89.css"])),T=o.exports.lazy(()=>t(()=>import("./Spinner.c308df73.js"),["assets/Spinner.c308df73.js","assets/index.f1a39131.js","assets/index.c4470b89.css"])),D=({state:s,dispatch:d,navigate:_,user:g})=>{const[p,h]=o.exports.useState(!1),[w,f]=o.exports.useState(!1),l=o.exports.useRef(null),E=()=>{const n=l.current.getScreenshot();n?(d({type:"image",payload:n}),(async()=>{const v=(await t(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest,i=await v({image:n},"/facematch",null,"");if(i.status===1){const a=await t(()=>import("./Alert.426dd29a.js"),["assets/Alert.426dd29a.js","assets/index.f1a39131.js","assets/index.c4470b89.css"]),R=a.customQuestionBox,x=await R("Is This You?",i.name,"Yes","No"),y=async(I,m,P)=>{const u=(await t(()=>import("./useDB.d7bc65b2.js"),[])).makeRequest;(await u({name:i.name,password:I},"/checkpassword",null,"")).output?(sessionStorage.setItem("token",m),(await t(()=>import("./TokenLogin.5150e2e9.js"),[])).default(m,u,()=>_("/"),P)):window.location.reload()};x&&await a.customInputAlert("Enter Your Password",y,{token:i.token,user:g})}else t(()=>import("./Alert.426dd29a.js"),["assets/Alert.426dd29a.js","assets/index.f1a39131.js","assets/index.c4470b89.css"]).then(async a=>{await a.customAlert("Face Was Not Recognized!","Please try again with better lighting with a more clear view of your face.","error"),window.location.reload()}).catch(a=>{console.log(a),window.location.reload()})})()):t(()=>import("./Alert.426dd29a.js"),["assets/Alert.426dd29a.js","assets/index.f1a39131.js","assets/index.c4470b89.css"]).then(async r=>{await r.customAlert("Failed To Capture Picture!","Please try again.","error"),window.location.reload()}).catch(r=>{console.log(r),window.location.reload()})};return c(S,{children:[e("hr",{className:"mt-2 mb-3"}),p?e("div",{className:"image-area",children:s.image===null?c("div",{className:"camera mb-5",onClick:E,children:[e(k,{ref:l,screenshotFormat:"image/jpeg",onUserMedia:()=>{f(!0)},height:"100%",width:"100%",screenshotSize:{width:500,height:500},videoConstraints:{facingMode:"user"}}),w?e("div",{className:"scan-text",children:"Click to Scan"}):""]}):c("div",{children:[e(T,{}),e("img",{src:s.image,className:"img-fluid user-picture mb-5"})]})}):e("div",{className:"d-grid gap-2",children:e("button",{className:"btn btn-danger",type:"button",onClick:n=>{h(!0)},children:"Or Scan your face to login!"})})]})};export{D as default};
