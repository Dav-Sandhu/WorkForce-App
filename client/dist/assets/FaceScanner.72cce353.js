import{r,_ as i,j as p,F as x,b as a}from"./index.248ad459.js";const N=r.exports.lazy(()=>i(()=>import("./react-webcam.2f96b4ff.js").then(t=>t.r),["assets/react-webcam.2f96b4ff.js","assets/index.248ad459.js","assets/index.aed92d30.css"])),R=({state:t,dispatch:_,navigate:g,user:f})=>{const[h,y]=r.exports.useState(!1),[b,S]=r.exports.useState(!1),l=r.exports.useRef(null),v=()=>{const s=l.current.getScreenshot();s?(_({type:"image",payload:s}),(async()=>{const m=await i(()=>import("./FaceRecognition.17873a21.js"),[]),w=await i(()=>import("./useDB.66946aeb.js"),[]);await m.loadModels();const u=w.makeRequest,n=await u(JSON.stringify({type:"picture",values:[]}));let c=!1,o=0;for(let e=0;e<n.length;e++){let d=await m.compareFaces(s,n[e].picture);c=d?!0:c,o=d?e:o}if(c){const e=await u(JSON.stringify({type:"employee_number",values:[n[o].employee_number]}));f.setUserInfo({employee_number:e[0].employee_number,first_name:e[0].first_name,last_name:e[0].last_name,email:e[0].email,password:e[0].password,hourly_wage:e[0].hourly_wage,picture:e[0].picture}),g("/")}else alert("face not recognized!")})()):alert("Failed to capture picture, try again!")};return p(x,{children:[a("hr",{className:"mt-2 mb-3"}),h?a("div",{className:"image-area",children:t.image===null?p("div",{className:"camera mb-5",onClick:v,children:[a(N,{ref:l,screenshotFormat:"image/jpeg",onUserMedia:()=>{S(!0)},height:"100%",width:"100%",videoConstraints:{facingMode:"user"}}),b?a("div",{className:"scan-text",children:"Scan"}):""]}):a("img",{className:"user-picture mb-5",src:t.image})}):a("div",{className:"d-grid gap-2",children:a("button",{className:"btn btn-danger",type:"button",onClick:s=>{y(!0)},children:"Or Scan your face to login!"})})]})};export{R as default};
