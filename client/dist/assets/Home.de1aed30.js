import{u as N,r as g,j as e,F as x,a as w,b as r,_ as k}from"./index.db0fe68c.js";function b(t){const o=new Date(t),n=o.getHours(),c=o.getMinutes().toString().padStart(2,"0"),s=n>=12?"PM":"AM";return`${(n%12||12).toString().padStart(2,"0")}:${c} ${s}`}function _(t){const o=new Date(t);let n=new Date-o;n=Math.max(0,n);const c=Math.floor(n/(1e3*60*60)).toString().padStart(2,"0"),s=Math.floor(n%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),a=Math.floor(n%(1e3*60)/1e3).toString().padStart(2,"0");return`${c}:${s}:${a}`}function I(){const t=N(),o=t.userInfo.clock_in,n=t.userInfo.clock_out,[c,s]=g.exports.useState(o===null?new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):n===null?"Hours Worked: "+_(o):"");return g.exports.useEffect(()=>{const a=setInterval(()=>{s(o!==null&&n===null?"Hours Worked: "+_(o):new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>clearInterval(a)},[]),e(x,{children:c})}const S=()=>{const t=N(),o=w(),n=t.userInfo.picture.length>0?t.userInfo.picture:"/default profile picture.jpg",c=t.userInfo.first_name+" "+t.userInfo.last_name,s=t.userInfo.email,a="$"+t.userInfo.hourly_wage+"/hour",p=t.userInfo.employee_number,l=t.userInfo.clock_in,m=t.userInfo.clock_out;return r("section",{className:"vh-100",style:{backgroundColor:"#eee"},children:[l!==null&&m===null?e(I,{}):"",e("div",{className:"container py-5 h-100",children:e("div",{className:"row d-flex justify-content-center align-items-center h-100",children:e("div",{className:"col-md-12 col-xl-4",children:e("div",{className:"card",style:{borderRadius:"15px"},children:r("div",{className:"card-body text-center",children:[e("div",{className:"mt-3 mb-4",children:e("img",{src:n,className:"rounded-circle img-fluid profile-picture",loading:"lazy",style:{width:"100px"},onClick:()=>{const i=document.createElement("input");i.type="file",i.accept="image/*",i.onchange=f=>{const u=f.target.files[0];console.log("Uploaded image:",u),u.size<=1*1024*1024?console.log("Successfull upload"):k(()=>import("./Alert.4f96ceea.js"),["assets/Alert.4f96ceea.js","assets/index.db0fe68c.js","assets/index.c4470b89.css"]).then(async d=>{await d.customAlert("Warning","Image cannot be larger than 1 MB.","warning")})},i.click()}})}),e("h4",{className:"mb-2",children:c}),e("p",{className:"text-muted mb-4",children:s}),r("div",{className:"home-buttons",children:[e("button",{type:"button",className:"btn btn-primary btn-rounded btn-lg",onClick:()=>{l===null?(async()=>{const u=(await k(()=>import("./useDB.4a39d696.js"),[])).makeRequest,d=await u({employee_number:p},"/clockin",null),h={...t.userInfo,clock_in:d.output[0].clock_in};t.setUserInfo(h);const v=await u(h,"/updateToken",null);sessionStorage.removeItem("token"),sessionStorage.setItem("token",v.token)})():o("/tasks")},children:l!==null?"Tasks":"Clock In"}),l!==null?e("button",{className:"btn btn-info btn-rounded btn-lg",onClick:()=>{o("/working")},children:"Agenda"}):""]}),r("div",{className:"d-flex justify-content-between text-center mt-5 mb-2",children:[r("div",{children:[e("p",{className:"mb-2 mr-3 h5 text-nowrap ",children:"#"+p}),e("p",{className:"text-muted mb-0",children:"Employee Number"})]}),r("div",{children:[e("p",{className:"mb-2 mr-3 h5 text-nowrap ",children:l===null?e(I,{}):b(m===null?l:m)}),e("p",{className:"text-muted mb-0",children:l===null?"Current Time":m===null?"Clocked In":"Clocked Out"})]}),r("div",{className:"px-3",children:[e("p",{className:"mb-2 mr-3 h5 text-nowrap ",children:a}),e("p",{className:"text-muted mb-0",children:"Hourly Wage"})]})]})]})})})})})]})};export{S as default};
