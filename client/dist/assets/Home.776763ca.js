import{u as I,r as h,j as t,F as v,a as x,b as a,_ as w}from"./index.fb6a51fc.js";function g(e){const n=new Date(e),o=n.getHours(),c=n.getMinutes().toString().padStart(2,"0"),s=o>=12?"PM":"AM";return`${(o%12||12).toString().padStart(2,"0")}:${c} ${s}`}function k(e){const n=new Date(e),o=new Date-n,c=Math.floor(o/(1e3*60*60)).toString().padStart(2,"0"),s=Math.floor(o%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),l=Math.floor(o%(1e3*60)/1e3).toString().padStart(2,"0");return`${c}:${s}:${l}`}function b(){const e=I(),n=e.userInfo.clock_in,o=e.userInfo.clock_out,[c,s]=h.exports.useState(n===null?new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):o===null?"Hours Worked: "+k(n):"");return h.exports.useEffect(()=>{const l=setInterval(()=>{s(n!==null&&o===null?"Hours Worked: "+k(n):new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>clearInterval(l)},[]),t(v,{children:c})}const S=()=>{const e=I(),n=x(),o=e.userInfo.picture.length>0?e.userInfo.picture:"/default profile picture.jpg",c=e.userInfo.first_name+" "+e.userInfo.last_name,s=e.userInfo.email,l="$"+e.userInfo.hourly_wage+"/hour",d=e.userInfo.employee_number,r=e.userInfo.clock_in,m=e.userInfo.clock_out;return a("section",{className:"vh-100",style:{backgroundColor:"#eee"},children:[r!==null&&m===null?t(b,{}):"",t("div",{className:"container py-5 h-100",children:t("div",{className:"row d-flex justify-content-center align-items-center h-100",children:t("div",{className:"col-md-12 col-xl-4",children:t("div",{className:"card",style:{borderRadius:"15px"},children:a("div",{className:"card-body text-center",children:[t("div",{className:"mt-3 mb-4",children:t("img",{src:o,className:"rounded-circle img-fluid profile-picture",style:{width:"100px"},onClick:()=>{const i=document.createElement("input");i.type="file",i.accept="image/*",i.onchange=p=>{const u=p.target.files[0];console.log("Uploaded image:",u),u.size<=1*1024*1024?console.log("Successfull upload"):alert("Image cannot be larger than 1 MB")},i.click()}})}),t("h4",{className:"mb-2",children:c}),t("p",{className:"text-muted mb-4",children:s}),t("button",{type:"button",className:"btn btn-primary btn-rounded btn-lg",onClick:()=>{r===null?(async()=>{const u=(await w(()=>import("./useDB.4a39d696.js"),[])).makeRequest,_=await u({employee_number:d},"/clockin",null),f={...e.userInfo,clock_in:_.output[0].clock_in};e.setUserInfo(f);const N=await u(f,"/updateToken",null);sessionStorage.removeItem("token"),sessionStorage.setItem("token",N.token)})():n("/tasks")},children:r!==null?"Tasks":"Clock In"}),a("div",{className:"d-flex justify-content-between text-center mt-5 mb-2",children:[a("div",{children:[t("p",{className:"mb-2 mr-3 h5 text-nowrap ",children:d}),t("p",{className:"text-muted mb-0",children:"Employee Number"})]}),a("div",{children:[t("p",{className:"mb-2 mr-3 h5 text-nowrap ",children:r===null?t(b,{}):g(m===null?r:m)}),t("p",{className:"text-muted mb-0",children:r===null?"Current Time":m===null?"Clocked In":"Clocked Out"})]}),a("div",{className:"px-3",children:[t("p",{className:"mb-2 mr-3 h5 text-nowrap ",children:l}),t("p",{className:"text-muted mb-0",children:"Hourly Wage"})]})]})]})})})})})]})};export{S as default};
