import{r as n,_ as i,u as f,a as v,j as e,F as b,b as l}from"./index.eadf3838.js";const g=(r,{type:c,payload:s})=>{switch(c){case"employee_number":return{...r,employee_number:s};case"password":return{...r,password:s};case"image":return{...r,image:s};case"alert":return{...r,alert:!r.alert};case"valid":return{...r,valid:Boolean(s)};case"empty_employee_number":return{...r,empty_employee_number:Boolean(s)};case"empty_password":return{...r,empty_password:Boolean(s)};case"checked":return{...r,checked:Boolean(s)};default:return r}},w=n.exports.lazy(()=>i(()=>import("./FaceScanner.ff70311d.js"),["assets/FaceScanner.ff70311d.js","assets/index.eadf3838.js","assets/index.aed92d30.css","assets/FaceScanner.e9a6ad0c.css"])),x=()=>{const r=n.exports.useRef(null),c=n.exports.useRef(null),s=f(),p=sessionStorage.getItem("token"),m=v();if(p!==null)return(async()=>{const h=(await i(()=>import("./useDB.50c6ad0b.js"),[])).makeRequest;(await i(()=>import("./TokenLogin.fa8d08cf.js"),[])).default(p,h,m,s)})(),e(b,{children:"Loading..."});const[a,o]=n.exports.useReducer(g,{employee_number:"",password:localStorage.getItem("password")||"",image:null,alert:!1,valid:!0,empty_employee_number:!0,empty_password:!0}),_=t=>{o({type:t.target.id,payload:t.target.value})};return n.exports.useEffect(()=>{c.current.className.includes("is-invalid")||r.current.className.includes("is-invalid")?o({type:"valid",payload:!1}):o({type:"valid",payload:!0})},[a.employee_number,a.password]),l("div",{className:"login container",children:[e("h1",{className:"fw-bold fs-25 mb-1 text-center text-info title",children:"WorkForce Login"}),a.alert?l("div",{className:"alert alert-danger alert-dismissible",role:"alert",children:["Warning: Missing Fields",e("button",{className:"btn-close","aria-label":"close",onClick:()=>{o({type:"alert"})}})]}):"",l("form",{className:a.valid?"":"was-validated",noValidate:!0,onSubmit:t=>{t.preventDefault(),(async()=>{const d=(await i(()=>import("./useDB.50c6ad0b.js"),[])).makeRequest;try{const u=await d({type:"find-employee",values:[a.employee_number,a.password]},"/authenticate",null);sessionStorage.setItem("token",u.token),a.checked&&localStorage.setItem("password",a.password),(await i(()=>import("./TokenLogin.fa8d08cf.js"),[])).default(u.token,d,m,s)}catch{a.valid?alert("Login attempt failed, please make sure your information is correct!"):o({type:"alert"})}})()},children:[e("div",{className:"input-group mb-4",children:l("div",{className:"form-floating",children:[e("input",{id:"employee_number",className:a.empty_employee_number?"form-control":a.employee_number.length>0?"form-control is-valid":"form-control is-invalid",type:"text",ref:c,placeholder:"Employee Number",value:a.employee_number,onChange:t=>{_(t),o({type:"empty_employee_number",payload:!1})},required:!0}),e("label",{htmlFor:"employee_number",children:"Employee Number: "}),e("div",{className:"invalid-feedback user-invalid",children:"Invalid input"})]})}),l("div",{className:"form-floating mb-4",children:[e("input",{id:"password",className:a.empty_password?"form-control":a.password.length>0?"form-control is-valid":"form-control is-invalid",type:"password",ref:r,placeholder:"Password",value:a.password,onChange:t=>{_(t),o({type:"empty_password",payload:!1})},required:!0}),e("label",{htmlFor:"password",children:"Password: "}),e("div",{className:"invalid-feedback",children:"Invalid input"})]}),e("div",{className:"mb-4",children:l("div",{className:"form-check",children:[e("input",{className:"form-check-input",type:"checkbox",value:"",id:"savePassword",onChange:t=>{o({type:"checked",payload:t.target.checked})}}),e("label",{className:"form-check-label",htmlFor:"savePassword",children:"Remember Password"})]})}),e("input",{className:"btn btn-outline-primary",type:"submit",value:"Login"})]}),e("a",{className:"mb-4",href:"#!",children:"Forgot password?"}),l("p",{children:["Not a member? ",e("a",{href:"/register",children:"Register"})]}),e(w,{state:a,dispatch:o,navigate:m,user:s})]})};export{x as default};
