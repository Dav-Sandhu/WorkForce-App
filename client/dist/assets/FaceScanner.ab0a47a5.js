import{r as a,_ as t,b as c,F as b,j as e}from"./index.3f21815a.js";const y=a.exports.lazy(()=>t(()=>import("./react-webcam.244fee50.js").then(o=>o.r),["assets/react-webcam.244fee50.js","assets/index.3f21815a.js","assets/index.c4470b89.css"])),R=a.exports.lazy(()=>t(()=>import("./Spinner.a949e481.js"),["assets/Spinner.a949e481.js","assets/index.3f21815a.js","assets/index.c4470b89.css"])),T=({state:o,dispatch:_,navigate:g,user:p})=>{const[h,w]=a.exports.useState(!1),[f,v]=a.exports.useState(!1),i=a.exports.useRef(null),E=()=>{const s=i.current.getScreenshot();s?(_({type:"image",payload:s}),(async()=>{const l=(await t(()=>import("./useDB.4a39d696.js"),[])).makeRequest,m=await l({image:s},"/facematch",null);if(m.status===1){const x=(await t(()=>import("./Alert.4ea9295f.js"),["assets/Alert.4ea9295f.js","assets/index.3f21815a.js","assets/index.c4470b89.css"])).customQuestionBox,d=await x("Is This You?","Yes","No");if(console.log(d),d){const u=m.token;sessionStorage.setItem("token",u),(await t(()=>import("./TokenLogin.6220583a.js"),[])).default(u,l,()=>g("/"),p)}else window.location.reload()}else t(()=>import("./Alert.4ea9295f.js"),["assets/Alert.4ea9295f.js","assets/index.3f21815a.js","assets/index.c4470b89.css"]).then(async r=>{await r.customAlert("Face Was Not Recognized!","Please try again with better lighting with a more clear view of your face.","error"),window.location.reload()}).catch(r=>{console.log(r),window.location.reload()})})()):t(()=>import("./Alert.4ea9295f.js"),["assets/Alert.4ea9295f.js","assets/index.3f21815a.js","assets/index.c4470b89.css"]).then(async n=>{await n.customAlert("Failed To Capture Picture!","Please try again.","error")}).catch(n=>{console.log(n),window.location.reload()})};return c(b,{children:[e("hr",{className:"mt-2 mb-3"}),h?e("div",{className:"image-area",children:o.image===null?c("div",{className:"camera mb-5",onClick:E,children:[e(y,{ref:i,screenshotFormat:"image/jpeg",onUserMedia:()=>{v(!0)},height:"100%",width:"100%",videoConstraints:{facingMode:"user"}}),f?e("div",{className:"scan-text",children:"Click to Scan"}):""]}):c("div",{children:[e(R,{}),e("img",{src:o.image,className:"img-fluid user-picture mb-5"})]})}):e("div",{className:"d-grid gap-2",children:e("button",{className:"btn btn-danger",type:"button",onClick:s=>{w(!0)},children:"Or Scan your face to login!"})})]})};export{T as default};
